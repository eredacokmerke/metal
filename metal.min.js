function metal_init(e){function t(e,t,i,l,n){this.type=e,this.isaret=t,this.liste=i,this.secenek=l,this.icerik=n,this.ilkInput=1,this.secilenListeElemani=0}function i(){for(var e=0;e<I.length;e++)s(e)}function l(e){for(var t=0;t<I.length;t++)t!=e&&s(t)}function n(e){var t=0,i=e.children.length,l="";if(0===i)l=e.innerHTML,0===l.length&&(l=e.value);else for(t=0;i>t;t++)l+=n(e.children[t]);return l}function s(e){I[e].liste.style.display="none",I[e].isaret.children[0].innerHTML=L,T.splice(T.indexOf(e),1),0===T.length&&(document.onkeydown=function(){return!0})}function a(e,t){I[e].liste.style.display="inline",I[e].isaret.children[0].innerHTML=C,t===A?(document.onkeydown=o,c(I[e],0)):t===w&&(document.onkeydown=d,r(I[e],0)),T.push(e)}function r(e,t){var i=e.secilenListeElemani,l=e.liste.children[0],n=l.children.length;l.children[i].className="",i+=t,0>i?i=n-1:i===n&&(i=0),l.children[i].className=E,e.secilenListeElemani=i}function c(e,t){var i=e.secilenListeElemani,l=e.liste.children[0],n=l.children.length;l.children[i].className="",i+=t,0>i?i=n-1:i===n&&(i=0);var s=l.children[i].style.opacity;if(0===t)if(""===s||"1"===s)l.children[i].className=E,e.secilenListeElemani=i;else for(var a=0;"0"===s&&n-1>i;)i++,s=l.children[i].style.opacity,"1"===s&&(a=1,l.children[i].className=E,e.secilenListeElemani=i);else if(""===s||"1"===s)l.children[i].className=E,e.secilenListeElemani=i;else{for(var a=0;"0"===s&&n-1>i&&i>0;)i+=t,s=l.children[i].style.opacity,"1"===s&&(a=1,l.children[i].className=E,e.secilenListeElemani=i);if(0===a)if(1===t)for(i=-1;"0"===s&&n-1>i;)i+=t,s=l.children[i].style.opacity,"1"===s&&(a=1,l.children[i].className=E,e.secilenListeElemani=i);else for(i=n;"0"===s&&i>0;)i+=t,s=l.children[i].style.opacity,"1"===s&&(a=1,l.children[i].className=E,e.secilenListeElemani=i)}}function d(e){e=e||window.event;var t=T[T.length-1];if("38"==e.keyCode)e.preventDefault(),r(I[t],-1);else if("40"==e.keyCode)e.preventDefault(),r(I[t],1);else if("13"==e.keyCode){e.preventDefault();var l=I[t];l.icerik.value=n(l.liste.children[0].children[l.secilenListeElemani]),s(t)}else"27"==e.keyCode&&(e.preventDefault(),i())}function o(e){e=e||window.event;var t=T[T.length-1];if("38"==e.keyCode)e.preventDefault(),c(I[t],-1);else if("40"==e.keyCode)e.preventDefault(),c(I[t],1);else if("13"==e.keyCode){e.preventDefault();var l=I[t];l.icerik.value=n(l.liste.children[0].children[l.secilenListeElemani]),s(t)}else"27"==e.keyCode&&(e.preventDefault(),i())}function u(e){var t=e.parentElement.parentElement.getAttribute(h),i=e.getAttribute(h),l=I[t].liste.children[0];l.children[I[t].secilenListeElemani].className="",l.children[i].className=E,I[t].secilenListeElemani=parseInt(i)}var p,h="indeks",m="metal-icerik-div",v="metal-input-div",y="metal-output-div",f="metal-pointer-div",k="metal-input",g="metal-pointer",N="metal-text",b="metal-items",E="metal-selected-item",A=0,w=1,L="▼",C="▲",x="10px",D=document.getElementsByClassName("metal-div");p=void 0===e?!1:e.oneListVisible;for(var I=[],T=[],M=0;M<D.length;M++){var H=D[M].children[0],O=D[M].children[1];O.setAttribute(h,M);for(var S=O.children[0],B=0;B<S.children.length;B++)S.children[B].setAttribute(h,B),S.children[B].onmouseover=function(){u(this)};var R=D[M].getAttribute("metal-width");D[M].style.width=R+"px";var U=R-25;if(U+="px",H.className===v){var W=document.createElement("input");W.setAttribute("value",H.getAttribute(N)),W.className=k,W.setAttribute(h,M),W.style.width=U,W.style.borderColor="transparent",W.style.borderWidth="1px";var z=document.createElement("div");z.style.display="inline-block",z.style.verticalAlign="middle",z.style.width=U,z.appendChild(W),z.className=m,z.style.paddingRight=x;var V=document.createTextNode(L),_=document.createElement("output");_.style.cursor="pointer",_.className=g,_.appendChild(V),_.setAttribute(h,M);var j=document.createElement("div");j.style.display="inline-block",j.style.verticalAlign="middle",j.style.width="15px",j.className=f,j.appendChild(_),j.setAttribute(h,M),H.appendChild(z),H.appendChild(j),H.setAttribute(h,M),O.style.display="none",O.children[0].style.width=R+"px";var q=new t(v,j,O,H,W);I.push(q)}else if(H.className===y){var W=document.createElement("input");W.setAttribute("value",H.getAttribute(N)),W.className=k,W.setAttribute(h,M),W.style.width=U,W.readOnly=!0,W.style.borderColor="transparent",W.style.borderWidth="1px",W.style.cursor="pointer",W.style.userSelect="none",W.style.webkitUserSelect="none",W.style.MozUserSelect="none",W.setAttribute("unselectable","on");var z=document.createElement("div");z.style.display="inline-block",z.style.verticalAlign="middle",z.style.width=U,z.appendChild(W),z.className=m,z.style.paddingRight=x;var V=document.createTextNode(L),_=document.createElement("output");_.style.cursor="pointer",_.className=g,_.appendChild(V),_.setAttribute(h,M);var j=document.createElement("div");j.style.display="inline-block",j.style.verticalAlign="middle",j.style.width="15px",j.className=f,j.appendChild(_),j.setAttribute(h,M),H.appendChild(z),H.appendChild(j),H.setAttribute(h,M),O.style.display="none",O.children[0].style.width=R+"px";var q=new t(y,j,O,H,W);I.push(q)}}for(var B=0;B<I.length;B++)I[B].type===v?(I[B].liste.addEventListener("click",function(e){var t=this.getAttribute(h);I[t].icerik.value=n(e.target),s(t),I[t].ilkInput=1}),I[B].icerik.addEventListener("click",function(){var e=this.getAttribute(h);1===I[e].ilkInput&&(I[e].ilkInput=0,I[e].icerik.value="")}),I[B].isaret.addEventListener("click",function(){var e=this.getAttribute(h);"none"===I[e].liste.style.display?(a(e,A),p===!0&&l(e)):s(e)}),I[B].icerik.addEventListener("input",function(){var e=this.getAttribute(h),t=0;I[e].ilkInput=0;for(var i=I[e].liste.getElementsByTagName("li"),l=0;l<i.length;l++){var r=n(i[l]);-1===r.toLowerCase().indexOf(this.value.toLowerCase())?(i[l].style.opacity=0,i[l].style.display="none"):(i[l].style.opacity=1,i[l].style.display="",t=1)}1===t?a(e,A):s(e)})):I[B].type===y&&(I[B].liste.addEventListener("click",function(e){var t=this.getAttribute(h);I[t].icerik.value=n(e.target),s(t),I[t].ilkInput=1}),I[B].secenek.addEventListener("click",function(){var e=this.getAttribute(h);"none"===I[e].liste.style.display?(a(e,w),p===!0&&l(e)):s(e)}));window.onclick=function(e){e=e||window.event;{var t=e.target||e.srcElement;t.parentNode.id}t.parentNode.className!==v&&t.parentNode.className!==b&&t.parentNode.className!==y&&t.parentNode.className!==f&&t.parentNode.className!==m&&i()}}
