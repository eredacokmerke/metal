function metal_init(e){function t(e,t,i,l,n){this.type=e,this.isaret=t,this.liste=i,this.secenek=l,this.icerik=n,this.ilkInput=1,this.secilenListeElemani=0}function i(){for(var e=0;e<D.length;e++)s(e)}function l(e){for(var t=0;t<D.length;t++)t!=e&&s(t)}function n(e){var t=0,i=e.children.length,l="";if(0===i)l=e.innerHTML;else for(t=0;i>t;t++)l+=n(e.children[t]);return l}function s(e){D[e].liste.style.display="none",D[e].isaret.children[0].innerHTML=A,I.splice(I.indexOf(e),1),0===I.length&&(document.onkeydown=function(){return!0})}function a(e,t){D[e].liste.style.display="inline",D[e].isaret.children[0].innerHTML=L,t===E?(document.onkeydown=o,c(D[e],0)):t===w&&(document.onkeydown=d,r(D[e],0)),I.push(e)}function r(e,t){var i=e.secilenListeElemani,l=e.liste.children[0],n=l.children.length;l.children[i].className="",i+=t,0>i?i=n-1:i===n&&(i=0),l.children[i].className=b,e.secilenListeElemani=i}function c(e,t){var i=e.secilenListeElemani,l=e.liste.children[0],n=l.children.length;l.children[i].className="",i+=t,0>i?i=n-1:i===n&&(i=0);var s=l.children[i].style.opacity;if(0===t)if(""===s||"1"===s)l.children[i].className=b,e.secilenListeElemani=i;else for(var a=0;"0"===s&&n-1>i;)i++,s=l.children[i].style.opacity,"1"===s&&(a=1,l.children[i].className=b,e.secilenListeElemani=i);else if(""===s||"1"===s)l.children[i].className=b,e.secilenListeElemani=i;else{for(var a=0;"0"===s&&n-1>i&&i>0;)i+=t,s=l.children[i].style.opacity,"1"===s&&(a=1,l.children[i].className=b,e.secilenListeElemani=i);if(0===a)if(1===t)for(i=-1;"0"===s&&n-1>i;)i+=t,s=l.children[i].style.opacity,"1"===s&&(a=1,l.children[i].className=b,e.secilenListeElemani=i);else for(i=n;"0"===s&&i>0;)i+=t,s=l.children[i].style.opacity,"1"===s&&(a=1,l.children[i].className=b,e.secilenListeElemani=i)}}function d(e){e=e||window.event;var t=I[I.length-1];if("38"==e.keyCode)e.preventDefault(),r(D[t],-1);else if("40"==e.keyCode)e.preventDefault(),r(D[t],1);else if("13"==e.keyCode){e.preventDefault();var l=D[t];l.icerik.value=n(l.liste.children[0].children[l.secilenListeElemani]),s(t)}else"27"==e.keyCode&&(e.preventDefault(),i())}function o(e){e=e||window.event;var t=I[I.length-1];if("38"==e.keyCode)e.preventDefault(),c(D[t],-1);else if("40"==e.keyCode)e.preventDefault(),c(D[t],1);else if("13"==e.keyCode){e.preventDefault();var l=D[t];l.icerik.value=n(l.liste.children[0].children[l.secilenListeElemani]),s(t)}else"27"==e.keyCode&&(e.preventDefault(),i())}var u,p="indeks",h="metal-icerik-div",m="metal-input-div",y="metal-output-div",v="metal-pointer-div",f="metal-input",k="metal-pointer",g="metal-text",N="metal-items",b="metal-selected-item",E=0,w=1,A="▼",L="▲",C="10px",x=document.getElementsByClassName("metal-div");u=void 0===e?!1:e.oneListVisible;for(var D=[],I=[],T=0;T<x.length;T++){var M=x[T].children[0],H=x[T].children[1];H.setAttribute(p,T);var O=x[T].getAttribute("metal-width");x[T].style.width=O+"px";var S=O-25;if(S+="px",M.className===m){var B=document.createElement("input");B.setAttribute("value",M.getAttribute(g)),B.className=f,B.setAttribute(p,T),B.style.width=S,B.style.borderColor="transparent",B.style.borderWidth="1px";var R=document.createElement("div");R.style.display="inline-block",R.style.verticalAlign="middle",R.style.width=S,R.appendChild(B),R.className=h,R.style.paddingRight=C;var U=document.createTextNode(A),W=document.createElement("output");W.style.cursor="pointer",W.className=k,W.appendChild(U),W.setAttribute(p,T);var z=document.createElement("div");z.style.display="inline-block",z.style.verticalAlign="middle",z.style.width="15px",z.className=v,z.appendChild(W),z.setAttribute(p,T),M.appendChild(R),M.appendChild(z),M.setAttribute(p,T),H.style.display="none",H.children[0].style.width=O+"px";var V=new t(m,z,H,M,B);D.push(V)}else if(M.className===y){var B=document.createElement("input");B.setAttribute("value",M.getAttribute(g)),B.className=f,B.setAttribute(p,T),B.style.width=S,B.readOnly=!0,B.style.borderColor="transparent",B.style.borderWidth="1px",B.style.cursor="pointer",B.style.userSelect="none",B.style.webkitUserSelect="none",B.style.MozUserSelect="none",B.setAttribute("unselectable","on");var R=document.createElement("div");R.style.display="inline-block",R.style.verticalAlign="middle",R.style.width=S,R.appendChild(B),R.className=h,R.style.paddingRight=C;var U=document.createTextNode(A),W=document.createElement("output");W.style.cursor="pointer",W.className=k,W.appendChild(U),W.setAttribute(p,T);var z=document.createElement("div");z.style.display="inline-block",z.style.verticalAlign="middle",z.style.width="15px",z.className=v,z.appendChild(W),z.setAttribute(p,T),M.appendChild(R),M.appendChild(z),M.setAttribute(p,T),H.style.display="none",H.children[0].style.width=O+"px";var V=new t(y,z,H,M,B);D.push(V)}}for(var _=0;_<D.length;_++)D[_].type===m?(D[_].liste.addEventListener("click",function(e){var t=this.getAttribute(p);D[t].icerik.value=n(e.target),s(t),D[t].ilkInput=1}),D[_].icerik.addEventListener("click",function(){var e=this.getAttribute(p);1===D[e].ilkInput&&(D[e].ilkInput=0,D[e].icerik.value="")}),D[_].isaret.addEventListener("click",function(){var e=this.getAttribute(p);"none"===D[e].liste.style.display?(a(e,E),u===!0&&l(e)):s(e)}),D[_].icerik.addEventListener("input",function(){var e=this.getAttribute(p),t=0;D[e].ilkInput=0;for(var i=D[e].liste.getElementsByTagName("li"),l=0;l<i.length;l++){var r=n(i[l]);-1===r.toLowerCase().indexOf(this.value.toLowerCase())?(i[l].style.opacity=0,i[l].style.display="none"):(i[l].style.opacity=1,i[l].style.display="",t=1)}1===t?a(e,E):s(e)})):D[_].type===y&&(D[_].liste.addEventListener("click",function(e){var t=this.getAttribute(p);D[t].icerik.value=n(e.target),s(t),D[t].ilkInput=1}),D[_].secenek.addEventListener("click",function(){var e=this.getAttribute(p);"none"===D[e].liste.style.display?(a(e,w),u===!0&&l(e)):s(e)}));window.onclick=function(e){e=e||window.event;{var t=e.target||e.srcElement;t.parentNode.id}t.parentNode.className!==m&&t.parentNode.className!==N&&t.parentNode.className!==y&&t.parentNode.className!==v&&t.parentNode.className!==h&&i()}}
